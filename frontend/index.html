<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Editor</title>
  <style>
    :root {
      font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
      line-height: 1.5;
      font-weight: 400;

      color-scheme: light dark;
      color: black; /* Default text color */
      background-color: white;

      font-synthesis: none;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-text-size-adjust: 100%;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 320px;
      min-height: 100vh;
      padding: 20px; /* Add some padding around the content */
    }

    h1 {
      font-size: 2.2em;
      line-height: 1.1;
      margin-bottom: 20px; /* Add some space below the title */
      background-color: #ff33f6; /* Pink background for header */
      color: white; /* White text on pink background */
      padding: 10px;
      border-radius: 5px;
    }

    button {
      border: none;
      font-size: 1em;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.25s;
      background-color: #f0f0f0; /* Light grey button background */
      padding: 10px 20px;
      border-radius: 5px;
      margin-top: 10px; /*Added to create separation*/
    }

    button:focus,
    button:focus-visible {
      outline: 4px auto -webkit-focus-ring-color;
    }

    a {
      font-weight: 500;
      color: #ff33f6; /* Keep link color pink */
      text-decoration: inherit;
    }

    a:hover {
      color: #d02bc6;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: #ff33f6;
    }

    input,
    textarea {
      background-color: white;  /*Enables text color and the ability to see the cursor*/
      cursor: auto;              /*Enables text color and the ability to see the cursor*/
      color: black; /* forces text to be black */
    }

    input:disabled,
    textarea:disabled {
      background-color: #eee; /* Light gray for disabled inputs */
      cursor: not-allowed;
      color: black; /* Ensure text is readable when disabled */
    }

    input:disabled::placeholder,
    textarea:disabled::placeholder {
      color: #888; /*  Gray placeholder text when disabled */
    }

    ul,
    ol {
      list-style-position: inside;
    }

    /* For smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* For responsive width */
    #root {
      width: 100%;
      max-width: 600px; /* Limit width for better readability */
    }

    /* Remove default styling for some elements */
    ul {
      list-style: none;
    }

    .profile-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px; /* Add space below profile container */
    }

    .profile-picture-container {
      position: relative;
      width: 150px;
      height: 150px;
      margin-bottom: 10px;
    }


    .profile-picture {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #ff33f6; /* Add a border to the profile picture */
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1; /* Ensure the image is above the overlay */
    }

    .profile-picture-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white overlay */
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: #555;
      text-align: center;
      z-index: 2; /* Ensure the overlay is above the image */
      pointer-events: none; /* Allow drops on the container */
    }

    .profile-picture-container.dragover .profile-picture-overlay {
      background-color: rgba(200, 200, 200, 0.8); /* Change background color on dragover */
      color: #333;
    }

    .input-group {
      margin-bottom: 15px;
      width: 100%;
    }

    .input-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #ff33f6;
      background-color: #ff33f6; /* Pink background for label */
      color: white; /* White text on pink background */
      padding: 5px;
      border-radius: 3px;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
      color: black; /* default to black text */
    }

    .input-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    #profilePictureInput {
      display: none; /* Hide the file input */
    }

    /* Dark mode adjustments - not active by default */
    @media (prefers-color-scheme: dark) {
      :root {
        color: rgba(255, 255, 255, 0.87);
        background-color: white;
      }

      a:hover {
        color: #ff6af2;
      }

      button {
        background-color: #5233ff;
        color: rgba(255, 255, 255, 0.87);
      }

      .profile-container {
        border-color: white;
      }

      .input-group input,
      .input-group textarea {
        background-color: white;
        color: rgba(255, 255, 255, 0.87);
        border-color: white;
      }

      h1 {
        background-color: #ff6af2; /* Slightly lighter pink in dark mode */
      }

      .input-group label {
        background-color: #ff6af2; /* Slightly lighter pink in dark mode */
      }

      input:disabled,
      textarea:disabled {
        background-color: white;
        color: #888;
      }
    }
  </style>
</head>
<body>
<div id="root">
  <h1>Profile Editor</h1>

  <div class="profile-container">
    <div class="profile-picture-container">
      <img src="placeholder-pfp.jpg" alt="Profile Picture" class="profile-picture" id="profilePicture">
      <div class="profile-picture-overlay">Drag & Drop Image Here</div>
    </div>
    <input type="file" id="profilePictureInput" accept="image/*">


    <div class="input-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" value="YourUsername" disabled>
    </div>

    <div class="input-group">
      <label for="description">Description:</label>
      <textarea id="description" name="description" disabled>Write something about yourself...</textarea>
    </div>

    <button id="editButton">Edit Profile</button>
    <button id="saveButton" style="display: none;">Save Changes</button> <!-- Initially hidden -->
  </div>
</div>

<script>
  const editButton = document.getElementById('editButton');
  const saveButton = document.getElementById('saveButton');
  const usernameInput = document.getElementById('username');
  const descriptionTextarea = document.getElementById('description');
  const profilePicture = document.getElementById('profilePicture');
  const profilePictureInput = document.getElementById('profilePictureInput');
  const profilePictureContainer = document.querySelector('.profile-picture-container');
  const profilePictureOverlay = document.querySelector('.profile-picture-overlay');

  editButton.addEventListener('click', () => {
    usernameInput.disabled = false;
    descriptionTextarea.disabled = false;

    //Force Text to be visible on edit
    usernameInput.style.color = "black";
    descriptionTextarea.style.color = "black";

    editButton.style.display = 'none'; // Hide the edit button
    saveButton.style.display = 'block'; // Show the save button

    // Enable drag and drop and programmatic click on edit
    profilePictureContainer.addEventListener('click', triggerFileInput);
    profilePictureContainer.classList.add('editable');
  });

  saveButton.addEventListener('click', () => {
    usernameInput.disabled = true;
    descriptionTextarea.disabled = true;

    //Force Text to be invisible on save
    usernameInput.style.color = "black";
    descriptionTextarea.style.color = "black";

    editButton.style.display = 'block'; // Show the edit button
    saveButton.style.display = 'none'; // Hide the save button

    // Disable drag and drop and programmatic click on save
    profilePictureContainer.removeEventListener('click', triggerFileInput);
    profilePictureContainer.classList.remove('editable');

    // In a real application, you would now save the changes to a server or local storage.
    alert('Changes saved!');
  });

  function triggerFileInput() {
    profilePictureInput.click();
  }

  profilePictureInput.addEventListener('change', (event) => {
    handleImageUpload(event);
  });

  // Drag and Drop Functionality
  profilePictureContainer.addEventListener('dragover', (e) => {
    if (!profilePictureContainer.classList.contains('editable')) return;
    e.preventDefault();  // Allow the drop
    profilePictureContainer.classList.add('dragover');
  });

  profilePictureContainer.addEventListener('dragleave', (e) => {
    if (!profilePictureContainer.classList.contains('editable')) return;
    profilePictureContainer.classList.remove('dragover');
  });


  profilePictureContainer.addEventListener('drop', (e) => {
    if (!profilePictureContainer.classList.contains('editable')) return;
    e.preventDefault();
    profilePictureContainer.classList.remove('dragover');

    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith('image/')) {
      handleFile(file);
    }
  });

  function handleFile(file) {
    const reader = new FileReader();

    reader.onload = (e) => {
      profilePicture.src = e.target.result; // Update the image source with the chosen file
      profilePictureOverlay.style.display = 'none'; // Hide the overlay when image is present.
    };

    reader.readAsDataURL(file); // Read the file as a data URL
  }

  function handleImageUpload(event) {
    const file = event.target.files[0];

    if (file) {
      const reader = new FileReader();

      reader.onload = (e) => {
        profilePicture.src = e.target.result; // Update the image source with the chosen file
        profilePictureOverlay.style.display = 'none'; // Hide the overlay when image is present.
      };

      reader.readAsDataURL(file); // Read the file as a data URL
    }
  }
</script>
</body>
</html>